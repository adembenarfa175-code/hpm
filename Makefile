#
# Makefile for HPM (Hybrid Package Manager) C-Core
#

# المترجم (Compiler)
CC = gcc

# خيارات المترجم (تضمين التحذيرات ومعيار C99)
CFLAGS = -Wall -Werror -std=c99 -g

# اسم الملف التنفيذي النهائي
TARGET = hpm_core

# قائمة بالملفات المصدرية (Source Files)
SRC = hpm_core.c hpm_file_driver.c

# قائمة بملفات الأغراض (*.o)
OBJ = $(SRC:.c=.o)

# -----------------------------------------------------
# الأهداف الرئيسية (Compilation)
# -----------------------------------------------------

# الهدف الافتراضي: بناء hpm_core
all: $(TARGET)

# قاعدة بناء الملف التنفيذي
$(TARGET): $(OBJ)
	$(CC) $(CFLAGS) $(OBJ) -o $(TARGET)

# قاعدة بناء ملفات الأغراض (قاعدة ضمنية)
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

# -----------------------------------------------------
# أهداف الإدارة
# -----------------------------------------------------

# هدف التنظيف: حذف الملفات المؤقتة والملف التنفيذي
.PHONY: clean
clean:
	rm -f $(OBJ) $(TARGET)

